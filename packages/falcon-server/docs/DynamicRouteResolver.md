# Dynamic Route Resolver

`DynamicRouteResolver` handles dynamic route resolution for the client application.
When user goes to an url that is not defined in React routing then client asks back-end for the type of content for that particular url:

- It asks every extension to get "fetch URL priority" from the assigned API DataSource instance
- It sorts API DataSource instances that are able to detect dynamic content type by their "priority"
- It calls `fetchUrl` method o

## Example

The simplest example is handling content from shop and blog. Let's say we want to resolve content for `/sport.html`

```js
class Magento2Api {
    getFetchUrlPriority(url) {
        // if url ends with .html then it's highly possible that it should be handed by shop
        // because it might be a product page under url generated by Magento
        return url.endsWith('.html') ? ApiUrlPriority.HIGH : ApiUrlPriority.NORMAL;
    }

    fetchUrl(obj, args, context, info) {
        // implementation of the resolver
    }
}
```

```js
class WordpressApoi {
    getFetchUrlPriority(url) {
        // return just static value so others can be higher or lower
        return ApiUrlPriority.NORMAL;
    }

    fetchUrl(obj, args, context, info) {
        // implementation of the resolver
    }
}
```

`DynamicRouteResolver` will try to call `getFetchUrlPriority(url)` method for both extensions:

- ShopExtension/Magento2Api will return `ApiUrlPriority.HIGH`
- BlogExtension/WordpressApi will return `ApiUrlPriority.NORMAL`

So in that case `DynamicRouteResolver` will call `ShopExtension.fetchUrl()` first, if that call returns `null`,
it will call `BlogExtension.fetchUrl()` second.

## Requirements

If any extension should handle dynamic routing it should implement both methods:

- `getFetchUrlPriority(url)` - accepts url (String) that should be resolved and returns the priority (Number) for the extension
- `fetchUrl(obj, args, context, info)` - fetches the data from the remote source or performs any other async logic to determine
the type of the given url
